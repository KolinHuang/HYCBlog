<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹  | é»„ç‰æ‰çš„åšå®¢</title><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹ " /><meta name="author" content="Kol Huang" /><meta property="og:locale" content="en_US" /><meta name="description" content="å‰‘æŒ‡ Offer 41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°" /><meta property="og:description" content="å‰‘æŒ‡ Offer 41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°" /><link rel="canonical" href="www.yucaihuang.com/HYCBlog/posts/priority-queue-src-code-analyze/" /><meta property="og:url" content="www.yucaihuang.com/HYCBlog/posts/priority-queue-src-code-analyze/" /><meta property="og:site_name" content="é»„ç‰æ‰çš„åšå®¢" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-28T21:03:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹ " /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Kol Huang" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"mainEntityOfPage":{"@type":"WebPage","@id":"www.yucaihuang.com/HYCBlog/posts/priority-queue-src-code-analyze/"},"url":"www.yucaihuang.com/HYCBlog/posts/priority-queue-src-code-analyze/","author":{"@type":"Person","name":"Kol Huang"},"description":"å‰‘æŒ‡ Offer 41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°","dateModified":"2020-08-28T21:03:00+08:00","datePublished":"2020-08-28T21:03:00+08:00","headline":"ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹ ","@type":"BlogPosting","@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/HYCBlog/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/HYCBlog/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/HYCBlog/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/HYCBlog/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/HYCBlog/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/HYCBlog/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/HYCBlog/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/HYCBlog/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/HYCBlog/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/HYCBlog/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/HYCBlog/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/HYCBlog/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/HYCBlog/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/HYCBlog/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/HYCBlog/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/HYCBlog/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/HYCBlog/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/HYCBlog/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/HYCBlog/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/HYCBlog/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/HYCBlog/assets/css/post.css"><link rel="stylesheet" href="/HYCBlog/assets/css/post.css"><link rel="preload" as="style" href="/HYCBlog/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/HYCBlog/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-176388509-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-176388509-1'); </script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT Licensed --> <script src="/HYCBlog/assets/js/post.min.js" async></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script> <script src="/HYCBlog/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="http://www.yucaihuang.com" alt="avatar"> <img src="/HYCBlog/assets/img/daliy/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/HYCBlog/">é»„ç‰æ‰çš„åšå®¢</a></div><div class="site-subtitle font-italic">æŠŠå¼€æºçš„å˜æˆè‡ªå·±çš„ï¼ŒæŠŠè‡ªå·±çš„å˜æˆç¥–ä¼ çš„!</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/HYCBlog/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/HYCBlog/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/HYCBlog/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/HYCBlog/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/HYCBlog/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/KolinHuang" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['yc_huang97','163.com'].join('@'))" > <i class="fas fa-envelope"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/HYCBlog/"> Posts </a> </span> <span>ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹ </span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹ </h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Aug 28, 2020, 9:03 PM +0800" > Aug 28 <i class="unloaded">2020-08-28T21:03:00+08:00</i> </span> by <span class="author"> Kol Huang</div><div> Updated <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT License --> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Sep 7, 2020, 9:59 AM +0800" > Sep 7 <i class="unloaded">2020-09-07T09:59:06+08:00</i> </span></div></div><div class="post-content"><h2 id="å‰‘æŒ‡-offer-41-æ•°æ®æµä¸­çš„ä¸­ä½æ•°">å‰‘æŒ‡ Offer 41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°</h2><p>å¦‚ä½•å¾—åˆ°ä¸€ä¸ªæ•°æ®æµä¸­çš„ä¸­ä½æ•°ï¼Ÿå¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¥‡æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä½äºä¸­é—´çš„æ•°å€¼ã€‚å¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¶æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œ</p><p>[2,3,4] çš„ä¸­ä½æ•°æ˜¯ 3</p><p>[2,3] çš„ä¸­ä½æ•°æ˜¯ (2 + 3) / 2 = 2.5</p><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼š</p><ul><li>void addNum(int num) - ä»æ•°æ®æµä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°åˆ°æ•°æ®ç»“æ„ä¸­ã€‚</li><li>double findMedian() - è¿”å›ç›®å‰æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚</li></ul><p>ç¤ºä¾‹ 1ï¼š</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">è¾“å…¥</span><span class="err">ï¼š</span>
<span class="o">[</span><span class="s">"MedianFinder"</span><span class="o">,</span><span class="s">"addNum"</span><span class="o">,</span><span class="s">"addNum"</span><span class="o">,</span><span class="s">"findMedian"</span><span class="o">,</span><span class="s">"addNum"</span><span class="o">,</span><span class="s">"findMedian"</span><span class="o">]</span>
<span class="o">[[],[</span><span class="mi">1</span><span class="o">],[</span><span class="mi">2</span><span class="o">],[],[</span><span class="mi">3</span><span class="o">],[]]</span>
<span class="n">è¾“å‡º</span><span class="err">ï¼š</span><span class="o">[</span><span class="kc">null</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="mf">1.50000</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="mf">2.00000</span><span class="o">]</span>
</pre></table></code></div></div><p>ç¤ºä¾‹ 2ï¼š</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">è¾“å…¥</span><span class="err">ï¼š</span>
<span class="o">[</span><span class="s">"MedianFinder"</span><span class="o">,</span><span class="s">"addNum"</span><span class="o">,</span><span class="s">"findMedian"</span><span class="o">,</span><span class="s">"addNum"</span><span class="o">,</span><span class="s">"findMedian"</span><span class="o">]</span>
<span class="o">[[],[</span><span class="mi">2</span><span class="o">],[],[</span><span class="mi">3</span><span class="o">],[]]</span>
<span class="n">è¾“å‡º</span><span class="err">ï¼š</span><span class="o">[</span><span class="kc">null</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="mf">2.00000</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="mf">2.50000</span><span class="o">]</span>
</pre></table></code></div></div><p>é™åˆ¶ï¼š</p><p><code class="language-plaintext highlighter-rouge">æœ€å¤šä¼šå¯¹ addNumã€findMediaè¿›è¡Œ 50000 æ¬¡è°ƒç”¨ã€‚</code></p><h3 id="äºŒåˆ†æŸ¥æ‰¾">äºŒåˆ†æŸ¥æ‰¾</h3><p>ç”¨ä¸€ä¸ªåˆ—è¡¨å­˜å‚¨å€¼ï¼Œæ¯æ¬¡äºŒåˆ†æŸ¥æ‰¾åˆé€‚çš„ä½ç½®æ’å…¥ï¼Œä½¿å¾—listå§‹ç»ˆæœ‰åºã€‚äºŒåˆ†æŸ¥æ‰¾æ—¶ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><div class="language-markdown highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="p">1.</span> åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™æ’å…¥åœ¨0ä½ç½®ã€‚
<span class="p">2.</span> æ’å…¥å…ƒç´ ä¸ºåˆ—è¡¨ä¸­çš„æœ€å¤§å€¼ï¼Œåˆ™æ’å…¥åœ¨æœ«å°¾ã€‚
</pre></table></code></div></div><p>éœ€è¦è®¡ç®—ä¸­ä½æ•°æ—¶ï¼Œåªéœ€åˆ¤æ–­åˆ—è¡¨é•¿åº¦çš„å¥‡å¶æ€§å³å¯ã€‚</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">MedianFinder</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">;</span>
    <span class="cm">/** initialize your data structure here. */</span>
    <span class="kd">public</span> <span class="nf">MedianFinder</span><span class="o">()</span> <span class="o">{</span>
      	<span class="c1">//ç”¨LinkedListä¼šè¶…æ—¶</span>
        <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addNum</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">binarySearch</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">pos</span><span class="o">,</span><span class="n">num</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">findMedian</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
            <span class="k">return</span> <span class="mf">0.0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()-</span><span class="mi">1</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
        <span class="c1">//é•¿åº¦ä¸ºå¶æ•°</span>
        <span class="k">if</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
            <span class="k">return</span> <span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">mid</span><span class="o">)</span> <span class="o">+</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="o">))*</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
        <span class="k">else</span><span class="c1">//é•¿åº¦ä¸ºå¥‡æ•°</span>
            <span class="k">return</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">mid</span><span class="o">)*</span><span class="mf">1.0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">binarySearch</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">){</span>
      	<span class="c1">//åˆ—è¡¨ä¸ºç©ºæ—¶ï¼Œæ’å…¥åœ¨0ä½ç½®</span>
        <span class="k">if</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>    <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
      	<span class="c1">//æ’å…¥å…ƒç´ å¤§äºç­‰äºä»»ä½•åˆ—è¡¨å…ƒç´ ï¼Œæ’å…¥åœ¨æœ€å</span>
        <span class="k">if</span><span class="o">(</span><span class="n">num</span> <span class="o">&gt;=</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()-</span><span class="mi">1</span><span class="o">))</span>
            <span class="k">return</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
      	<span class="c1">//äºŒåˆ†æŸ¥æ‰¾æ’å…¥ä½ç½®</span>
        <span class="kt">int</span> <span class="n">low</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">high</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()-</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="n">low</span> <span class="o">&lt;</span> <span class="n">high</span><span class="o">){</span>
            <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="o">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">num</span> <span class="o">==</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">mid</span><span class="o">)){</span>
                <span class="k">return</span> <span class="n">mid</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">mid</span><span class="o">))</span>
                <span class="n">high</span> <span class="o">=</span> <span class="n">mid</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">mid</span><span class="o">))</span>
                <span class="n">low</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">low</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>

<span class="cm">/**
 * Your MedianFinder object will be instantiated and called as such:
 * MedianFinder obj = new MedianFinder();
 * obj.addNum(num);
 * double param_2 = obj.findMedian();
 */</span>
</pre></table></code></div></div><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç”¨äº†LinkedListæ¥å­˜æ•°æ®ä¼šè¶…æ—¶ã€‚</p><p>LinkedListè™½ç„¶åº•å±‚å®ç°æ˜¯é“¾è¡¨ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œlist.add(index,element)æ“ä½œæ—¶ï¼Œéœ€è¦å°†æŒ‡é’ˆç§»åˆ°indexçš„ä½ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæ¶ˆè€—å¾ˆå¤šæ—¶é—´ï¼›ArrayListèƒ½å¤Ÿç›´æ¥æ ¹æ®indexè·³åˆ°éœ€è¦æ’å…¥çš„ä½ç½®ï¼Œä½†æ˜¯éœ€è¦å°†æ¯ä¸ªå…ƒç´ éƒ½åç§»ä¸€ä½å†æ’å…¥ï¼Œä¹Ÿéœ€è¦å¾ˆå¤šæ—¶é—´ã€‚æ‰€ä»¥å…³é”®åœ¨äºäºŒåˆ†æŸ¥æ‰¾çš„æ•ˆç‡ã€‚</p><p>åœ¨æ‰§è¡ŒäºŒåˆ†æŸ¥æ‰¾æ—¶ï¼Œç”¨LinkedListä¼šè€—è´¹å¾ˆå¤šæ—¶é—´ï¼Œå› ä¸ºå¯èƒ½éœ€è¦è°ƒç”¨list.get() <code class="language-plaintext highlighter-rouge">logN</code>æ¬¡ï¼Œæ¯æ¬¡æ‰§è¡Œgetæ“ä½œéƒ½éœ€è¦ä»é“¾è¡¨ç«¯ç‚¹å¼€å§‹æ£€ç´¢ï¼Œæ‰€ä»¥ä½¿ç”¨linkedListæ‰§è¡ŒäºŒåˆ†æŸ¥æ‰¾æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º<code class="language-plaintext highlighter-rouge">O(NlogN)</code>ã€‚</p><p>ArrayListåœ¨æ‰§è¡Œgetæ“ä½œæ—¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º<code class="language-plaintext highlighter-rouge">O(1)</code>ï¼Œæ‰€ä»¥ä½¿ç”¨ArrayListæ‰§è¡ŒäºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º<code class="language-plaintext highlighter-rouge">O(logN)</code>ã€‚</p><h2 id="ä¼˜å…ˆé˜Ÿåˆ—å †">ä¼˜å…ˆé˜Ÿåˆ—/å †</h2><p>å»ºç«‹ä¸€ä¸ªå°é¡¶å †Aå’Œå¤§é¡¶å †Bï¼Œå„ä¿å­˜åˆ—è¡¨çš„ä¸€åŠå…ƒç´ ï¼Œä¸”è§„å®šï¼š</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Aä¿å­˜è¾ƒå¤§çš„ä¸€åŠ</span><span class="err">ï¼Œ</span><span class="n">é•¿åº¦ä¸ºN</span><span class="o">/</span><span class="mi">2</span><span class="err">ï¼ˆ</span><span class="nc">Nä¸ºå¶æ•°</span><span class="err">ï¼‰</span><span class="n">æˆ–</span><span class="err">ï¼ˆ</span><span class="no">N</span><span class="o">+</span><span class="mi">1</span><span class="o">)/</span><span class="mi">2</span><span class="err">ï¼ˆ</span><span class="nc">Nä¸ºå¥‡æ•°</span><span class="err">ï¼‰ï¼›</span>
<span class="nc">Bä¿å­˜è¾ƒå°çš„ä¸€åŠ</span><span class="err">ï¼Œ</span><span class="n">é•¿åº¦ä¸ºN</span><span class="o">/</span><span class="mi">2</span><span class="err">ï¼ˆ</span><span class="nc">Nä¸ºå¶æ•°</span><span class="err">ï¼‰</span><span class="n">æˆ–</span><span class="err">ï¼ˆ</span><span class="no">N</span><span class="o">-</span><span class="mi">1</span><span class="o">)/</span><span class="mi">2</span><span class="err">ï¼ˆ</span><span class="nc">Nä¸ºå¥‡æ•°</span><span class="err">ï¼‰ï¼›</span>
</pre></table></code></div></div><p>éšåï¼Œä¸­ä½æ•°å¯ä»…æ ¹æ® A, B çš„å †é¡¶å…ƒç´ è®¡ç®—å¾—åˆ°ã€‚</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">MedianFinder</span> <span class="o">{</span>
    <span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="no">A</span><span class="o">,</span> <span class="no">B</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">MedianFinder</span><span class="o">()</span> <span class="o">{</span>
        <span class="no">A</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PriorityQueue</span><span class="o">&lt;&gt;();</span> <span class="c1">// å°é¡¶å †ï¼Œä¿å­˜è¾ƒå¤§çš„ä¸€åŠ</span>
        <span class="no">B</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PriorityQueue</span><span class="o">&lt;&gt;((</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="o">));</span> <span class="c1">// å¤§é¡¶å †ï¼Œä¿å­˜è¾ƒå°çš„ä¸€åŠ</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addNum</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span> <span class="o">{</span>
      	<span class="c1">//Aå’ŒBé•¿åº¦ç›¸ç­‰æ—¶ï¼Œä¼˜å…ˆæ’å…¥åˆ°Aï¼Œé•¿åº¦ä¸ç­‰æ—¶ï¼Œè¯´æ˜Aæ¯”Bå¤šä¸€ä¸ªå…ƒç´ ï¼Œåˆ™æŠŠæ•°åˆ†ä¸€ä¸ªç»™B</span>
        <span class="k">if</span><span class="o">(</span><span class="no">A</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">!=</span> <span class="no">B</span><span class="o">.</span><span class="na">size</span><span class="o">())</span> <span class="o">{</span>
          	<span class="c1">//ç”±äºè¿™ä¸ªæ•°å¯èƒ½æ¯”Aä¸­æœ€å°çš„å…ƒç´ å¤§ï¼Œæ‰€ä»¥éœ€è¦å…ˆæŠŠè¿™ä¸ªæ•°æ”¾å…¥Aä¸­ï¼Œç„¶åæŠŠAä¸­æœ€å°çš„æ•°æ‹¿å‡ºæ¥ç»™B</span>
            <span class="no">A</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
            <span class="no">B</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="no">A</span><span class="o">.</span><span class="na">poll</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
          	<span class="c1">//ç”±äºè¿™ä¸ªæ•°å¯èƒ½æ¯”Bä¸­æœ€å¤§çš„å…ƒç´ å°ï¼Œæ‰€ä»¥éœ€è¦å…ˆæŠŠè¿™ä¸ªæ•°æ”¾å…¥Bä¸­ï¼Œç„¶åæŠŠBä¸­æœ€å¤§çš„æ•°æ‹¿å‡ºæ¥ç»™A</span>
            <span class="no">B</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">num</span><span class="o">);</span>
            <span class="no">A</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="no">B</span><span class="o">.</span><span class="na">poll</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">findMedian</span><span class="o">()</span> <span class="o">{</span>
      	<span class="c1">//åˆ¤æ–­æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°</span>
        <span class="k">return</span> <span class="no">A</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">!=</span> <span class="no">B</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">?</span> <span class="no">A</span><span class="o">.</span><span class="na">peek</span><span class="o">()</span> <span class="o">:</span> <span class="o">(</span><span class="no">A</span><span class="o">.</span><span class="na">peek</span><span class="o">()</span> <span class="o">+</span> <span class="no">B</span><span class="o">.</span><span class="na">peek</span><span class="o">())</span> <span class="o">/</span> <span class="mf">2.0</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>å¤§ä½¬çš„ç­”æ¡ˆå°±æ˜¯å¦™å•Šï½æˆ‘è¿™èœğŸ”åªèƒ½å†™å†™äºŒåˆ†ï¼Œæ¸¸èµ°åœ¨è¶…æ—¶çš„è¾¹ç¼˜ã€‚</p><p>æ‰€ä»¥æŒ‰è¿™ä¸ªæ€è·¯ï¼Œä»¥åæˆ‘å¦‚æœéœ€è¦æ‰¾åˆ°ä¸€ä¸ªæ— åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå°±ä¸ç”¨å¯¹å®ƒæ’åºäº†ï¼Œæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿè¦O(NlogN)ï¼Œè¿™ä¸ªä¼˜å…ˆé˜Ÿåˆ—çš„æ–¹æ³•åªéœ€è¦O(N)ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦éœ€è¦O(N)ã€‚</p><p>Javaçš„å°é¡¶å †å°±æ˜¯ä¼˜å…ˆé˜Ÿåˆ—<code class="language-plaintext highlighter-rouge">PriorityQueue</code>ï¼Œå¤§é¡¶å †éœ€è¦åœ¨åˆå§‹åŒ–ä¼˜å…ˆé˜Ÿåˆ—æ—¶ï¼Œä¼ ä¸€ä¸ªè‡ªå®šä¹‰æ¯”è¾ƒå™¨ã€‚</p><p>æ¥åº·åº·æºç ï¼š</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>	<span class="cm">/**è‡ªç„¶åºçš„æ—¶å€™ï¼Œæ¯”è¾ƒå™¨ä¸ºnull
		* The comparator, or null if priority queue uses elements'
    * natural ordering.
    */</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">comparator</span><span class="o">;</span>


	<span class="cm">/**
    * Creates a {@code PriorityQueue} with the default initial capacity and
    * whose elements are ordered according to the specified comparator.
    *	æŒ‰ç…§æ¯”è¾ƒå™¨æ¥æ’åº
    * @param  comparator the comparator that will be used to order this
    *         priority queue.  If {@code null}, the {@linkplain Comparable
    *         natural ordering} of the elements will be used.
    * @since 1.8
    */</span>
  <span class="kd">public</span> <span class="nf">PriorityQueue</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">comparator</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">(</span><span class="no">DEFAULT_INITIAL_CAPACITY</span><span class="o">,</span> <span class="n">comparator</span><span class="o">);</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>é¡ºä¾¿åº·åº·ä¼˜å…ˆé˜Ÿåˆ—æ€ä¹ˆaddå…ƒç´ çš„ï¼š</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
</pre><td class="rouge-code"><pre><span class="n">addè°ƒç”¨äº†offer</span><span class="err">ï¼š</span>
  <span class="cm">/**
     * Inserts the specified element into this priority queue.
     *
     * @return {@code true} (as specified by {@link Queue#offer})
     * @throws ClassCastException if the specified element cannot be
     *         compared with elements currently in this priority queue
     *         according to the priority queue's ordering
     * @throws NullPointerException if the specified element is null
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">offer</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">e</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NullPointerException</span><span class="o">();</span>
        <span class="n">modCount</span><span class="o">++;</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span>	<span class="c1">//å½“å‰ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°</span>
  			<span class="c1">//å³å°†è¶…å‡ºCapacity</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">queue</span><span class="o">.</span><span class="na">length</span><span class="o">)</span>
          	<span class="c1">//æ‰©å®¹</span>
            <span class="n">grow</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
            <span class="n">queue</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="nf">siftUp</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

<span class="n">growæ€ä¹ˆæ‰©å®¹çš„å‘¢</span><span class="err">ï¼Ÿ</span>
  <span class="cm">/**
     * Increases the capacity of the array.
     *
     * @param minCapacity the desired minimum capacityä¼ å…¥ä¸€ä¸ªæœŸæœ›çš„æœ€å°å®¹é‡
     */</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">grow</span><span class="o">(</span><span class="kt">int</span> <span class="n">minCapacity</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">oldCapacity</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="c1">// Double size if small; else grow by 50%</span>
  			<span class="c1">//å¦‚æœæ—§å®¹é‡å°äº64ï¼Œåˆ™æŒ‡æ•°å¢é•¿ï¼›å¦åˆ™çº¿æ€§å¢é•¿</span>
        <span class="kt">int</span> <span class="n">newCapacity</span> <span class="o">=</span> <span class="n">oldCapacity</span> <span class="o">+</span> <span class="o">((</span><span class="n">oldCapacity</span> <span class="o">&lt;</span> <span class="mi">64</span><span class="o">)</span> <span class="o">?</span>
                                         <span class="o">(</span><span class="n">oldCapacity</span> <span class="o">+</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span>
                                         <span class="o">(</span><span class="n">oldCapacity</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="o">));</span>
        <span class="c1">// overflow-conscious code</span>
  			<span class="c1">//å¦‚æœæ–°çš„å®¹é‡å·²ç»è¶…å‡ºäº†èƒ½å¤Ÿåˆ†é…çš„æœ€å¤§å®¹é‡</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">newCapacity</span> <span class="o">-</span> <span class="no">MAX_ARRAY_SIZE</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
            <span class="n">newCapacity</span> <span class="o">=</span> <span class="n">hugeCapacity</span><span class="o">(</span><span class="n">minCapacity</span><span class="o">);</span>
        <span class="n">queue</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">queue</span><span class="o">,</span> <span class="n">newCapacity</span><span class="o">);</span>
    <span class="o">}</span>

<span class="n">æœ€å¤§æ•°ç»„é•¿åº¦ä¸ºå¤šå°‘</span><span class="err">ï¼Ÿ</span>
  <span class="cm">/**ä¸€äº›è™šæ‹Ÿæœºä¼šä¿ç•™ä¸€äº›å¤´éƒ¨å­—ç©ºé—´ï¼Œå¦‚æœåˆ†é…çš„å®¹é‡è¶…è¿‡è¿™ä¸ªæ•°ï¼Œæœ‰å¯èƒ½å¯¼è‡´OutOfMemoryError
     * The maximum size of array to allocate.
     * Some VMs reserve some header words in an array.
     * Attempts to allocate larger arrays may result in
     * OutOfMemoryError: Requested array size exceeds VM limit
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MAX_ARRAY_SIZE</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span> <span class="o">-</span> <span class="mi">8</span><span class="o">;</span>

<span class="n">è¶…å‡ºåä¼šè°ƒç”¨hugeCapacity</span><span class="o">(</span><span class="n">minCapacity</span><span class="o">)</span><span class="err">ï¼š</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">hugeCapacity</span><span class="o">(</span><span class="kt">int</span> <span class="n">minCapacity</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">minCapacity</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="c1">// overflow</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">OutOfMemoryError</span><span class="o">();</span>
  			<span class="c1">//å½“å‰æœŸæœ›çš„æœ€å°å®¹é‡å·²ç»å¤§äºèƒ½å¤Ÿåˆ†é…çš„æœ€å¤§å®¹é‡äº†ï¼Œå°±èµ‹å€¼ä¸ºInteger.MAX_VALUEï¼Œä¸ºå•¥ï¼Ÿ</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">minCapacity</span> <span class="o">&gt;</span> <span class="no">MAX_ARRAY_SIZE</span><span class="o">)</span> <span class="o">?</span>
            <span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span> <span class="o">:</span>
            <span class="no">MAX_ARRAY_SIZE</span><span class="o">;</span>
    <span class="o">}</span>
</pre></table></code></div></div><p><strong>å‘ç°äº†ä¸€ä¸ªé—®é¢˜</strong>ï¼Œå½“å‰æœŸæœ›çš„æœ€å°å®¹é‡å·²ç»å¤§äºèƒ½å¤Ÿåˆ†é…çš„æœ€å¤§å®¹é‡äº†ï¼Œä¸ºä»€ä¹ˆå°±æŠŠminCapacityèµ‹å€¼ä¸ºInteger.MAX_VALUEå‘¢ï¼Ÿ</p><p>è®©æˆ‘åº·åº·æœ‰æ²¡æœ‰è€å¤–é—®è¿‡è¿™ä¸ªé—®é¢˜ï¼Œåˆ«è¯´è¿˜çœŸæœ‰ï¼Œ<a href="https://stackoverflow.com/questions/35582809/java-8-arraylist-hugecapacityint-implementation">Java 8 Arraylist hugeCapacity(int) implementation</a></p><p>æœ‰ä¸€ä¸ªå›ç­”æ˜¯ï¼š</p><p>The maximal array size is limited to some number which varies across different JVMs and usually is slightly less than <code class="language-plaintext highlighter-rouge">Integer.MAX_VALUE</code>. So allocating the array of <code class="language-plaintext highlighter-rouge">Integer.MAX_VALUE</code> elements you will have <code class="language-plaintext highlighter-rouge">OutOfMemoryError</code> on most of JVMs even if you have enough memory to do it. <code class="language-plaintext highlighter-rouge">MAX_ARRAY_SIZE</code> assumes to be valid array size on the most of existing JVMs. So when <code class="language-plaintext highlighter-rouge">ArrayList</code> size approaches to <code class="language-plaintext highlighter-rouge">Integer.MAX_VALUE</code> (for example, you have more than 1_500_000_000 elements and need to enlarge an array), itâ€™s enlarged to this <code class="language-plaintext highlighter-rouge">MAX_ARRAY_SIZE</code>, so it can be successfully performed (assuming you have enough memory). Only if number of elements exceeds <code class="language-plaintext highlighter-rouge">MAX_ARRAY_SIZE</code>, the <code class="language-plaintext highlighter-rouge">ArrayList</code> tries to allocate an array of <code class="language-plaintext highlighter-rouge">Integer.MAX_VALUE</code> elements (which will likely to fail on most of JVMs, but <em>may</em> succeed on some of them). This way you can safely add elements up to <code class="language-plaintext highlighter-rouge">MAX_ARRAY_SIZE</code> on almost any JVM and only after that will have problems.</p><p>å°±æ˜¯è¯´å¤§éƒ¨åˆ†çš„JVMçš„æœ€å¤§æ•°ç»„sizeéƒ½ç•¥å¾®çš„å°äºInteger.MAX_VALUEï¼ˆè¿™ä¸ªåœ¨ä¸Šé¢çš„æºç é‡Œè¯´äº†ï¼‰ï¼Œå½“æœŸæœ›çš„å®¹é‡ï¼ˆå³minCapacityï¼‰è¶…è¿‡å¯åˆ†é…çš„æœ€å¤§å®¹é‡æ—¶ï¼Œä¼šå°è¯•ç€å¸®ä½ æŠŠå®¹é‡åŠ åˆ°<code class="language-plaintext highlighter-rouge">Integer.MAX_VALUE</code>ï¼Œè¿™æ ·å°±ä¸ä¼šåœ¨æ‰©å®¹çš„è¿‡ç¨‹ä¸­å°±äº§ç”Ÿ<code class="language-plaintext highlighter-rouge">OutOfMemoryError</code>ï¼ŒJVMä¼šåœ¨æ‰©å®¹ä»¥åå†æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ ·çš„æ–¹å¼å¯ä»¥å¸®åŠ©ä½ å®‰å…¨åœ°æŠŠå®¹é‡é€¼è¿‘ <code class="language-plaintext highlighter-rouge">MAX_ARRAY_SIZE</code> ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªå›ç­”ï¼š</p><p>If we can avoid <code class="language-plaintext highlighter-rouge">OutOfMemory</code> on some VMs, we will, otherwise, allocate <code class="language-plaintext highlighter-rouge">Integer.MAX_VALUE</code>, and succeed if youâ€™re lucky ã€‚</p><p>é€šä¿—æ˜“æ‡‚ï¼ä¸ºäº†é€‚é…å¤§å¤šæ•°çš„JVMï¼Œæ‰€ä»¥ä¸åœ¨æ‰©å®¹çš„æ—¶å€™äº§ç”Ÿ<code class="language-plaintext highlighter-rouge">OutOfMemoryError</code>ï¼Œå› ä¸ºæœ‰å°‘éƒ¨åˆ†JVMçš„æœ€å¤§å®¹é‡ç­‰äº <code class="language-plaintext highlighter-rouge">Integer.MAX_VALUE</code>ã€‚</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/HYCBlog/categories/blogging/'>Blogging</a>, <a href='/HYCBlog/categories/%E5%AE%B9%E5%99%A8/'>å®¹å™¨</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/HYCBlog/tags/java%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" class="post-tag no-text-decoration" >Javaæºç å­¦ä¹ </a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹  - é»„ç‰æ‰çš„åšå®¢&url=www.yucaihuang.com/HYCBlog/posts/priority-queue-src-code-analyze/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹  - é»„ç‰æ‰çš„åšå®¢&u=www.yucaihuang.com/HYCBlog/posts/priority-queue-src-code-analyze/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=ä»ç®—æ³•åˆ°æºç ï¼šPriorityQueueæºç å­¦ä¹  - é»„ç‰æ‰çš„åšå®¢&url=www.yucaihuang.com/HYCBlog/posts/priority-queue-src-code-analyze/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/HYCBlog/posts/point-to-offers/">å‰‘æŒ‡offeré¢˜è§£</a></li><li><a href="/HYCBlog/posts/leetcode-solution_101_200/">Leetcodeé¢˜è§£:101~200</a></li><li><a href="/HYCBlog/posts/leetcode-solution_200_500/">Leetcodeé¢˜è§£:200~500</a></li><li><a href="/HYCBlog/posts/web-object-concepte/">VO/DTO/DO/PO/POJO/JavaBeançš„åŒºåˆ«</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/HYCBlog/tags/%E7%AE%97%E6%B3%95%E9%A2%98%E8%A7%A3/">ç®—æ³•é¢˜è§£</a> <a class="post-tag" href="/HYCBlog/tags/java/">java</a> <a class="post-tag" href="/HYCBlog/tags/java%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/">Javaæºç å­¦ä¹ </a> <a class="post-tag" href="/HYCBlog/tags/algorithms/">Algorithms</a> <a class="post-tag" href="/HYCBlog/tags/web/">web</a> <a class="post-tag" href="/HYCBlog/tags/security/">security</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/HYCBlog/posts/java-ArrayList-srccode-analyze/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT License --> <span class="timeago small" > Sep 16 <i class="unloaded">2020-09-16T18:27:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Javaæºç åˆ†æä¹‹ArrayList</h3><div class="text-muted small"><p> ç±»å‰æ³¨é‡Š å…ˆçœ‹æºç å¼€å§‹çš„ä¸€å¤§æ®µæ³¨é‡Šï¼ŒåŸºæœ¬ä¸ŠæŠŠArrayListçš„åŠŸèƒ½å’Œå®ç°ä»‹ç»äº†ä¸€ä¸‹ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 5...</p></div></div></a></div><div class="card"> <a href="/HYCBlog/posts/web-docker_3/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT License --> <span class="timeago small" > Sep 7 <i class="unloaded">2020-09-07T19:39:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Dockerï¼šä¸€äº›ç»ƒä¹ </h3><div class="text-muted small"><p> Docker éƒ¨ç½² Nginx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #docker pull nginx # docker run -d --name nginx01 -p 2300:80 ngi...</p></div></div></a></div><div class="card"> <a href="/HYCBlog/posts/web-object-concepte/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT License --> <span class="timeago small" > Sep 9 <i class="unloaded">2020-09-09T19:25:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>VO/DTO/DO/PO/POJO/JavaBeançš„åŒºåˆ«</h3><div class="text-muted small"><p> VO VOï¼ˆView Objectï¼‰ï¼šè§†å›¾å¯¹è±¡ï¼Œç”¨äºå±•ç¤ºå±‚ï¼Œä½œç”¨æ˜¯æŠŠæŸä¸ªæŒ‡å®šwbé¡µé¢ï¼ˆæˆ–ç»„ä»¶ï¼‰çš„æ‰€æœ‰æ•°æ®å°è£…èµ·æ¥ã€‚ DTO DTOï¼ˆData Transfer Objectï¼‰ï¼šæ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œè¿™ä¸ªæ¦‚å¿µæ¥æºäºJ2EEçš„è®¾è®¡æ¨¡å¼ï¼ŒåŸæ¥çš„ç›®çš„æ˜¯ä¸ºäº†EJBçš„åˆ†å¸ƒå¼åº”ç”¨æä¾›ç²—ç²’åº¦çš„æ•°æ®å®ä½“ï¼Œä»¥å‡å°‘åˆ†å¸ƒå¼è°ƒç”¨çš„æ¬¡æ•°ï¼Œä»è€Œæé«˜åˆ†å¸ƒå¼è°ƒç”¨çš„æ€§èƒ½å’Œé™ä½ç½‘ç»œè´Ÿè½½ã€‚ä¹Ÿå¯æ³›æŒ‡ä¸ºå±•ç¤ºå±‚ä¸æœåŠ¡å±‚ä¹‹é—´...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/HYCBlog/posts/web-delete-system-python-in-centos/" class="btn btn-outline-primary"><p>centOSè¯¯åˆ ç³»ç»Ÿè‡ªå¸¦python</p></a> <a href="/HYCBlog/posts/algorithm-manacher/" class="btn btn-outline-primary"><p>Manacherç®—æ³•ï¼šçº¿æ€§æ—¶é—´å†…æ‰¾åˆ°æœ€å¤§å›æ–‡å­ä¸²</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><p class="footer-center"> Â© 2020 <a href="">Yucai Huang</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span> <br> <a href="https://beian.miit.gov.cn/" target="_blank">æµ™ICPå¤‡2020032055å·-1</a></p></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/HYCBlog/tags/%E7%AE%97%E6%B3%95%E9%A2%98%E8%A7%A3/">ç®—æ³•é¢˜è§£</a> <a class="post-tag" href="/HYCBlog/tags/java/">java</a> <a class="post-tag" href="/HYCBlog/tags/java%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/">Javaæºç å­¦ä¹ </a> <a class="post-tag" href="/HYCBlog/tags/algorithms/">Algorithms</a> <a class="post-tag" href="/HYCBlog/tags/web/">web</a> <a class="post-tag" href="/HYCBlog/tags/security/">security</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-176388509-1', 'auto'); ga('send', 'pageview'); </script> <script> (function(e,t,n,i,s,a,c){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)} ;a=t.createElement(i);c=t.getElementsByTagName(i)[0];a.async=true;a.src=s ;c.parentNode.insertBefore(a,c) })(window,document,"galite","script","https://cdn.jsdelivr.net/npm/ga-lite@2/dist/ga-lite.min.js"); galite('create', '{"id"=>"UA-176388509-1", "pv"=>{"enabled"=>false, "proxy_url"=>"", "proxy_endpoint"=>"", "cache"=>true}}', 'auto'); galite('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/HYCBlog/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="www.yucaihuang.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
